<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>XRef Detergent</title>
  <link rel="manifest" href="./manifest.json">
  <link rel="icon" href="./assets/favicon.png">
  <link rel="apple-touch-icon" href="./assets/apple-touch-icon.png">
  <link rel="stylesheet" href="./style.css">
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <img src="./assets/logo.svg" alt="Diversey" class="logo">
      <div class="titles">
        <h1>XRef Detergent</h1>
        <p>Quick drop → g/L lookup • Offline ready</p>
      </div>
    </div>
    <div class="actions">
      <button id="aboutBtn" class="chip">About</button>
      <button id="editBtn" class="chip" title="Edit" style="display:none">Edit Products</button>
    </div>
  </header>

  <main class="content">
    <label for="productSelect"><strong>Select a product:</strong></label>
    <select id="productSelect" size="8" aria-describedby="chlorinatedWarning"></select>

    <div id="chlorinatedWarning" class="note" hidden>
      <strong>Note:</strong> Chlorinated product — add 3 drops of Sodium Thiosulphate in Step 2.
    </div>

    <div class="table-wrap" id="tableWrap" hidden>
      <table id="resultTable">
        <thead>
          <tr>
            <th>Concentration</th>
            <th>0.5 g/L</th><th>1.0 g/L</th><th>1.5 g/L</th>
            <th>2.0 g/L</th><th>3.0 g/L</th><th>6.0 g/L</th>
          </tr>
        </thead>
        <tbody>
          <tr id="dropRow">
            <td>Drops</td>
            <td id="c0"></td><td id="c1"></td><td id="c2"></td>
            <td id="c3"></td><td id="c4"></td><td id="c5"></td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="instructions" id="instructions" hidden>
      <h3>Instructions</h3>
      <ol>
        <li>Fill the test tube to the 5 ml mark with water from the wash tank.</li>
        <li id="chlorineStep" hidden>Add 3 drops of Sodium Thiosulphate.</li>
        <li>Add 1 drop of Indicator Reagent — solution will turn pink.</li>
        <li>Select the correct acid by reference to table 3 (ACID 3 is 4 × strength of ACID 1).</li>
        <li>Add the ACID 1 or 3 a drop at a time, holding dropper bottle vertically. Swirl after each addition.</li>
        <li>Continue until the colour changes from pink to colourless.</li>
        <li>Count number of drops and read product concentration from table 2.</li>
      </ol>
    </div>

    <div id="errorBanner" class="note warn" hidden></div>
  </main>

  <footer id="footerInfo" class="footer">Offline ready.</footer>

  <!-- About Modal -->
  <div id="aboutModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="aboutTitle">
    <div class="dialog">
      <header class="dialog-hd">
        <h2 id="aboutTitle">About</h2>
        <button id="closeAbout" class="chip">Close</button>
      </header>
      <div class="dialog-bd" id="aboutContent">Loading…</div>
    </div>
  </div>

  <script src="./js/app.js"></script>
</body>
</html>
